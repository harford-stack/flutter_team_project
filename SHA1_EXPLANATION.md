# SHA-1 키가 필요한 이유

## 🤔 SHA-1 키란?

SHA-1은 앱의 **디지털 서명**을 나타내는 지문(fingerprint)입니다. 
각 Android 앱은 고유한 키스토어(keystore)로 서명되며, 이 서명의 해시값이 SHA-1 키입니다.

## 🔐 왜 필요한가요?

### Google Sign-In 보안 메커니즘

Google Sign-In은 **보안을 위해** 앱이 정말로 본인이 만든 앱인지 확인합니다.

```
1. 사용자가 앱에서 "Google로 로그인" 버튼 클릭
   ↓
2. 앱이 Google 서버에 인증 요청
   ↓
3. Google 서버가 확인:
   "이 앱의 SHA-1 키가 Firebase에 등록된 키와 일치하나?"
   ↓
4. 일치하면 ✅ 로그인 성공
   불일치하면 ❌ 로그인 실패
```

### 보안 목적

**SHA-1 키를 등록하지 않으면:**
- ❌ Google Sign-In이 작동하지 않음
- ❌ "이 앱은 Google Sign-In을 사용할 권한이 없습니다" 오류 발생
- ❌ 다른 사람이 만든 가짜 앱이 Google 로그인을 사용하는 것을 방지

**SHA-1 키를 등록하면:**
- ✅ Firebase에 등록된 SHA-1 키와 일치하는 앱만 Google Sign-In 사용 가능
- ✅ 보안 강화: 악성 앱이 Google 로그인을 도용하는 것을 방지

## 📱 개발 환경별 SHA-1 키

### Debug 모드 (개발 중)
- **위치**: `~/.android/debug.keystore`
- **용도**: 개발 중 테스트용
- **특징**: 모든 개발자가 각자 다른 키를 가짐

### Release 모드 (배포용)
- **위치**: 프로젝트에서 생성한 키스토어
- **용도**: 실제 앱스토어 배포용
- **특징**: 팀에서 공유하는 하나의 키

## 🔄 Firebase Console에 등록하는 이유

Firebase Console에 SHA-1 키를 등록하면:

1. **Google이 인증**: "이 SHA-1 키를 가진 앱만 Google Sign-In을 사용할 수 있다"
2. **보안 강화**: 등록되지 않은 앱은 Google 로그인 불가
3. **팀 협업**: 각 팀원의 개발 환경(SHA-1)을 모두 등록하여 모두가 테스트 가능

## 💡 실제 예시

### 시나리오 1: SHA-1 키를 등록하지 않은 경우

```
사용자: "Google로 로그인" 버튼 클릭
  ↓
Google 서버: "이 앱의 SHA-1 키가 등록되어 있지 않네요?"
  ↓
결과: ❌ 로그인 실패
오류: "This app is not authorized to use Google Sign-In"
```

### 시나리오 2: SHA-1 키를 등록한 경우

```
사용자: "Google로 로그인" 버튼 클릭
  ↓
Google 서버: "이 앱의 SHA-1 키가 Firebase에 등록되어 있네요!"
  ↓
결과: ✅ 로그인 성공
사용자 정보 반환
```

## 📋 정리

| 항목 | 설명 |
|-----|------|
| **SHA-1 키** | 앱의 디지털 서명 지문 |
| **필요한 이유** | Google Sign-In 보안 인증 |
| **등록 위치** | Firebase Console → 프로젝트 설정 → Android 앱 |
| **개발 모드** | 각 개발자마다 다른 키 (모두 등록 필요) |
| **배포 모드** | 팀에서 공유하는 하나의 키 |

## ⚠️ 중요 사항

1. **각 팀원마다 다른 SHA-1 키**
   - 각자의 개발 환경에서 생성됨
   - 모두 Firebase Console에 등록해야 함

2. **Debug와 Release 키 모두 등록**
   - 개발 중: Debug 키
   - 배포 시: Release 키

3. **SHA-1 키 없이는 Google Sign-In 불가**
   - 반드시 등록해야 하는 필수 사항

---

## ❓ 자주 묻는 질문

### Q: 다른 팀원이 내 SHA-1 키를 사용할 수 있나요?

**A: 기술적으로는 불가능하고, 설사 가능하다고 해도 하면 안 됩니다!**

#### 1. 기술적으로 불가능

각 개발자의 SHA-1 키는 **본인의 키스토어(keystore)에서 생성**됩니다:

```
팀장의 컴퓨터:
  ~/.android/debug.keystore → SHA-1: AA:BB:CC:DD:...

팀원1의 컴퓨터:
  ~/.android/debug.keystore → SHA-1: 11:22:33:44:...

팀원2의 컴퓨터:
  ~/.android/debug.keystore → SHA-1: FF:EE:DD:CC:...
```

**각자의 키스토어 파일이 다르기 때문에** 다른 사람의 SHA-1 키를 사용할 수 없습니다.

#### 2. 만약 키스토어를 공유한다면?

**⚠️ 절대 하면 안 됩니다!**

만약 키스토어 파일을 공유한다면:

**문제점:**
- ❌ **보안 위험**: 키스토어 파일이 유출되면 앱이 위조될 수 있음
- ❌ **책임 문제**: 누가 앱을 서명했는지 추적 불가
- ❌ **배포 문제**: 나중에 앱스토어 배포 시 문제 발생 가능

**올바른 방법:**
- ✅ 각자 본인의 키스토어 사용
- ✅ 각자의 SHA-1 키를 Firebase에 모두 등록
- ✅ 배포용 키스토어는 안전하게 관리 (팀장만 보관)

#### 3. Firebase Console에 여러 SHA-1 키 등록

**Firebase Console에는 여러 SHA-1 키를 등록할 수 있습니다:**

```
Firebase Console → Android 앱 → SHA 인증서 지문:
  ✅ AA:BB:CC:DD:... (팀장)
  ✅ 11:22:33:44:... (팀원1)
  ✅ FF:EE:DD:CC:... (팀원2)
```

이렇게 하면:
- 각 팀원이 본인의 키로 개발 가능
- 모든 팀원이 Google Sign-In 테스트 가능
- 보안 유지

### Q: 왜 각자 다른 키를 사용해야 하나요?

**A: 보안과 책임 분리 때문입니다.**

1. **보안**: 각자의 키를 사용하면 키 유출 시 피해 최소화
2. **책임**: 누가 앱을 서명했는지 명확히 추적 가능
3. **유연성**: 팀원이 추가/제거될 때 해당 키만 등록/삭제 가능

---

**결론**: SHA-1 키는 Google Sign-In의 보안 메커니즘입니다. Firebase Console에 등록하지 않으면 Google 로그인이 작동하지 않습니다! 🔐

**각 팀원은 본인의 SHA-1 키를 사용하고, Firebase Console에 모두 등록해야 합니다.**

